# 開発環境用のテストデータ導入ガイド

新しい開発者がプロジェクトに参加し、Supabase上にテストデータを導入するための手順です。

## 【ステップ1】 データベースのテーブルと構造を作成する (Migrationの実行)

まず、Supabaseプロジェクトに、アプリケーションが必要とする全てのテーブル、ポリシー、関数を作成します。

### 1. プロジェクトのルートディレクトリに移動します。

```bash
cd nuxt-marketplace
```

### 2. ローカルCLIとSupabaseプロジェクトをリンクします。

- このコマンドは、PCごとに一度だけ実行すればOKです。
- `[project-ref]`は、Supabaseダッシュボードの `Project Settings > General` で確認できます。

```bash
supabase link --project-ref [project-ref]
```

### 3. マイグレーションを実行します。

- 以下のコマンドで、`supabase/migrations`フォルダにあるSQLが実行され、データベースにテーブルなどが作成されます。

```bash
supabase db push
```

## 【ステップ2】 手動でテストユーザーを作成する

次に、アプリケーションの動作確認に必要となるテストユーザーを、https://localhost:3000/signup ページから手動で作成します。


## 【ステップ3】 各ユーザーのUUIDをコピーする

作成したユーザーのUUID（ユニークなID）を、次のステップで使うために控えておきます。

1. 「Authentication」のUsersリストから各ユーザーをクリックします。
2. `User Info`セクションにあるUUIDをコピーし、テキストエディタなどに貼り付けておきます。

## 【ステップ4】 サンプルデータを投入する (seeds.sqlの実行)

最後に、作成したユーザーに紐付いたサンプルデータ（プロフィール、商品、カテゴリなど）をデータベースに投入します。

1. プロジェクトの`supabase/seeds.sql`ファイルを開きます。
2. ファイル内の`【...のUUIDを貼り付け】`となっているプレースホルダーを、ステップ3でコピーした各ユーザーのUUIDにすべて書き換えてください。
3. `seeds.sql`ファイルの中身を全文コピーします。
4. Supabaseダッシュボードの「**SQL Editor**」を開き、コピーしたSQLを貼り付けて「**RUN**」ボタンを押して実行します。

以上で、開発環境のセットアップは完了です。作成したアカウントでアプリケーションにログインし、動作を確認してください。
